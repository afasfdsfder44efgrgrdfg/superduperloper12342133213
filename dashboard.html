<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pivot Cheat Hub</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <link rel="stylesheet" href="dashboard.css" />
  <script src="dashboard.js" defer></script>
</head>
<body>
  <div class="navbar">
    <div class="tabs">
      <div class="tab active" onclick="switchTab('Home')"><i class="fa-solid fa-house"></i> Home</div>
      <div class="tab" onclick="switchTab('Announcements')"><i class="fa-solid fa-bullhorn"></i> Announcements</div>
      <div class="tab" onclick="switchTab('Updates')"><i class="fa-solid fa-arrow-up"></i> Updates</div>
      <div class="tab" onclick="switchTab('Download')"><i class="fa-solid fa-download"></i> Download</div>
      <div class="tab" onclick="switchTab('Forums')"><i class="fa-solid fa-users"></i> Forums</div>
      <div class="tab admin-only-tab" id="adminsTab" style="display:none;" onclick="switchTab('Admins')"><i class="fa-solid fa-user-shield"></i> Admins</div>
      <div class="tab owner-only-tab" id="auditLogTab" style="display:none;" onclick="switchTab('Audit Log')"><i class="fa-solid fa-file-lines"></i> Audit Log</div>
      <div class="tab owner-only-tab" id="scriptTab" style="display:none;" onclick="handleScriptTabClick()"><i class="fa-solid fa-code"></i> Script</div>
    </div>
    <div class="profile-area">
      <input type="text" class="search-input" placeholder="Search..." oninput="searchSuggestions()" />
      <div class="search-suggestions" id="suggestionsBox"></div>
      <div class="profile" onclick="toggleDropdown()">
        <div class="profile-circle" id="navProfileCircle"></div>
        <span class="username" id="navUsername"></span>
        <span class="admin-badge" style="display:none;">Admin</span>
      </div>
      <div class="dropdown" id="dropdownMenu">
        <a href="#" onclick="openSettings()">Settings</a>
        <a href="#" onclick="logout()">Log Out</a>
      </div>
    </div>
  </div>

  <div class="content">
    <div class="welcome-banner" id="welcomeMessage">
      <h1><i class="fa-solid fa-sparkles"></i> Welcome to Pivot Cheat Hub</h1>
      <p>Access the latest cheats, updates, and community discussions.</p>
      <button class="join-discord" onclick="window.open('https://discord.gg/getPivot','_blank')">Join Discord</button>
    </div>

    <div id="homeSection">
      <div class="community-forum-card">
        <i class="fa-solid fa-users icon"></i>
        <h3>Explore Cheat Community</h3>
        <p>Join discussions or get the latest cheat updates.</p>
        <button class="browse-forums" onclick="switchTab('Announcements')">Browse Announcements</button>
      </div>
    </div>

    <div id="announcementsSection" style="display:none;">
      <div class="community-forum-card" id="announcementCard" style="display:none;">
        <i class="fa-solid fa-bullhorn icon"></i>
        <h3>Create Announcement</h3>
        <p>Share important updates with the community.</p>
        <button class="browse-forums" id="openAnnouncementModal">Add Text</button>
      </div>
      <div id="announcements"></div>
    </div>

    <div id="updatesSection" style="display:none;">
      <div class="category-section">
        <div class="category">
          <h3>Latest Updates <i class="fa-solid fa-chevron-down"></i></h3>
          <div class="category-content" id="latestUpdatesContent"></div>
        </div>
      </div>
      <div class="category-section">
        <div class="category">
          <h3>Old Updates <i class="fa-solid fa-chevron-down"></i></h3>
          <div class="category-content" id="oldUpdatesContent"></div>
        </div>
      </div>
    </div>

    <div id="forumsSection" style="display:none;">
      <div class="community-forum-card">
        <h1><i class="fa-solid fa-users"></i> Welcome to Cheat Discussions</h1>
        <p>Share and learn cheat strategies with the community.</p>
      </div>
      <div class="community-forum-card" id="forumCard" style="display:none;">
        <i class="fa-solid fa-users icon"></i>
        <h3>Create a Cheat Discussion</h3>
        <p>Share strategies, updates, or seek help from the community.</p>
        <button class="browse-forums" id="openForumModal">Start Thread</button>
      </div>
      <div id="masterFacts"></div>
    </div>

    <div id="downloadSection" style="display:none;">
      <div class="community-forum-card">
        <i class="fa-solid fa-code icon"></i>
        <h3>Script</h3>
        <p>Click on Download Button To Get Pivot Script.</p>
        <button class="browse-forums" onclick="downloadCheat('script')">Download</button>
      </div>
      <div class="community-forum-card">
        <i class="fa-solid fa-cube icon"></i>
        <h3>Executor</h3>
        <p>Click on Download Button To Get Pivot Executor.</p>
        <button class="browse-forums" onclick="downloadCheat('executor')">Download</button>
      </div>
    </div>

    <div id="scriptSection" style="display:none;">
      <div class="script-editor" id="scriptEditor">
        <h2>Script Code</h2>
        <textarea id="scriptContent"></textarea>
        <div class="actions" id="scriptActions">
          <button id="saveScriptBtn">Save</button>
          <button id="copyScriptBtn" style="display:none;">Copy</button>
          <button id="rawScriptBtn" style="display:none;">Raw</button>
          <button id="downloadScriptBtn" style="display:none;">Download</button>
        </div>
        <div id="scriptPreview"></div>
      </div>
    </div>

    <div id="adminsSection" style="display:none;">
      <div class="admins-section">
        <h2>Admin Panel</h2>
        <button class="add-key-btn" id="addKeyBtn">Add Key</button>
        <table class="admins-table">
          <thead>
            <tr>
              <th>Category</th>
              <th>Name</th>
              <th>Key</th>
              <th>Creation Date</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="adminsList"></tbody>
        </table>
      </div>
    </div>

    <div id="auditLogSection" style="display:none;">
      <div class="audit-log-section">
        <h2>Audit Log</h2>
        <table class="audit-table">
          <thead>
            <tr>
              <th>Action</th>
              <th>User</th>
              <th>Details</th>
              <th>Timestamp</th>
            </tr>
          </thead>
          <tbody id="auditLogList"></tbody>
        </table>
      </div>
    </div>

    <div class="modal-overlay" id="announcementModal">
      <div class="modal">
        <h2>New Announcement</h2>
        <span class="close-btn" id="closeAnnouncementModal">&times;</span>
        <form id="newAnnouncementForm">
          <label for="announcementHeadline">Headline</label>
          <input type="text" id="announcementHeadline" required />
          <label for="announcementDescription">Description</label>
          <textarea id="announcementDescription" required></textarea>
          <div class="actions">
            <button type="submit">Post Announcement</button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal-overlay" id="forumModal">
      <div class="modal">
        <h2>New Discussion Thread</h2>
        <span class="close-btn" id="closeForumModal">&times;</span>
        <form id="newForumForm">
          <label for="forumTitle">Thread Category</label>
          <input type="text" id="forumTitle" required />
          <label for="forumHeadline">Thread Title</label>
          <input type="text" id="forumHeadline" required />
          <label for="forumDescription">Discussion Content</label>
          <textarea id="forumDescription" required></textarea>
          <div class="actions">
            <button type="submit">Post Thread</button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal-overlay" id="detailedModal">
      <div class="detailed-modal">
        <span class="close-btn" id="closeDetailedModal">&times;</span>
        <div id="detailedContent"></div>
        <button class="reply-btn" id="replyBtn">Reply</button>
      </div>
    </div>

    <div class="modal-overlay" id="messageModal">
      <div class="modal">
        <h2>Reply to Threads</h2>
        <span class="close-btn" id="closeMessageModal">&times;</span>
        <form id="messageForm">
          <input type="hidden" id="actionType" />
          <input type="hidden" id="targetId" />
          <label for="messageText">Your Reply</label>
          <textarea id="messageText" required></textarea>
          <div class="actions">
            <button type="submit">Send Reply</button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal-overlay" id="ownerKeyModal">
      <div class="modal">
        <h2>Owner Key</h2>
        <span class="close-btn" id="closeOwnerKeyModal">&times;</span>
        <form id="ownerKeyForm">
          <label for="ownerKey">Owner Key</label>
          <input type="text" id="ownerKey" required />
          <div class="actions">
            <button type="submit">Submit</button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal-overlay" id="scriptLoginModal">
      <div class="modal">
        <h2>Script Access Login</h2>
        <span class="close-btn" id="closeScriptLoginModal">&times;</span>
        <form id="scriptLoginForm">
          <label for="scriptLoginKey">Enter Owner Key</label>
          <input type="text" id="scriptLoginKey" required />
          <div class="actions">
            <button type="submit">Login</button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal-overlay" id="editUpdateModal">
      <div class="modal">
        <h2>Edit Update</h2>
        <span class="close-btn" id="closeEditUpdateModal">&times;</span>
        <form id="editUpdateForm">
          <input type="hidden" id="updateId" />
          <label for="updateVersion">Version</label>
          <input type="text" id="updateVersion" required />
          <label for="updateSummary">Summary</label>
          <textarea id="updateSummary" required></textarea>
          <div class="actions">
            <button type="submit">Save</button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal-overlay" id="settingsModal">
      <div class="modal settings-modal">
        <span class="close-btn" id="closeSettingsModal">&times;</span>
        <div class="settings-sidebar">
          <div class="tab active" onclick="switchSettingsTab('Profile')">Profile</div>
          <div class="tab" onclick="switchSettingsTab('Username')">Username</div>
          <div class="tab" onclick="switchSettingsTab('Password')">Password</div>
          <div class="tab" onclick="switchSettingsTab('Log Out')">Log Out</div>
        </div>
        <div class="settings-content">
          <div class="settings-tab" id="Profile">
            <h2>Profile</h2>
            <div class="profile-preview">
              <div class="profile-circle" id="profileCircle"></div>
              <span class="username" id="settingsUsername"></span>
            </div>
            <div class="file-input">
              <label for="profilePic">Choose File</label>
              <input type="file" id="profilePic" accept="image/*" />
            </div>
          </div>
          <div class="settings-tab" id="Username" style="display:none;">
            <h2>Username Settings</h2>
            <p class="warning">Warning: You can only change your username once every 30 days.</p>
            <label for="newUsername">New Username</label>
            <input type="text" id="newUsername" />
            <button class="submit-btn" onclick="submitUsername()">Submit</button>
          </div>
          <div class="settings-tab" id="Password" style="display:none;">
            <h2>Password Settings</h2>
            <p class="warning">Warning: You can only change your password once every 30 days.</p>
            <label for="newPassword">New Password</label>
            <input type="password" id="newPassword" />
            <button class="submit-btn" onclick="submitPassword()">Submit</button>
            <p>Password: [Hidden]</p>
          </div>
          <div class="settings-tab" id="Log Out" style="display:none;">
            <h2>Log Out</h2>
            <p>Are you sure you want to log out?</p>
            <button class="submit-btn" onclick="logout()">Confirm Log Out</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="addKeyModal">
      <div class="modal">
        <h2>Add New Key</h2>
        <span class="close-btn" id="closeAddKeyModal">&times;</span>
        <form id="addKeyForm">
          <label for="newKey">Generated Key</label>
          <input type="text" id="newKey" required />
          <label for="keyCategory">Category</label>
          <input type="text" id="keyCategory" required />
          <label for="keyName">Name</label>
          <input type="text" id="keyName" required />
          <div class="actions">
            <button type="submit">Save Key</button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal-overlay" id="rawScriptModal" style="display:none;">
      <pre id="rawScriptContent" style="margin:0;"></pre>
    </div>
  </div>
</body>
</html>